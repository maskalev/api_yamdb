# api_yamdb

API для сервиса оценок фильмов, музыки, книг и прочего.

Проект работает на Django 3.0, SQLite3, Django REST Framework. Аутентификация через Simple JWT.

### Как развернуть проект локально
1. Скопируйте проект
```commandline
git clone git@github.com:maskalev/api_yamdb.git
```

2. В корне проекта создайте пустой файл .env

3. Запустите проект
```commandline
docker-compose up -d
```

4. Выполните миграции
```commandline
docker-compose exec -T web python3 manage.py makemigrations users --no-input
docker-compose exec -T web python3 manage.py makemigrations api --no-input
docker-compose exec -T web python3 manage.py migrate --no-input
```

5. Соберите статику
```commandline
docker-compose exec -T web python3 manage.py collectstatic --no-input
```

6. Перезапустите проект
```commandline
docker-compose restart
```

7. Скопируйте данные
```commandline
docker-compose exec -T web python manage.py loaddata fixtures.json
```

Сервис доступен на *localhost/api/v1/*.

Документация API доступна на *localhost/redoc/*.

Логин/пароль суперпользователя: *root/admin*.

### Примеры запросов 

1. Список жанров
```commandline
http://localhost/api/v1/genres/?format=json
```

```
{
count: 5,
next: null,
previous: null,
results: [
    {
        name: "Комедия",
        slug: "comedy"
    },
    {
        name: "Мультфильм",
        slug: "animation"
    },
    {
        name: "Триллер",
        slug: "thriller"
    },
    {
        name: "Ужасы",
        slug: "horror"
    },
    {
        name: "Фантастика",
        slug: "sci-fi"
    }
    ]
}
```

2. Информация о произведении
```commandline
http://localhost/api/v1/titles/1/?format=json
```

```commandline
{
    id: 1,
    category: {
        name: "Фильм",
        slug: "movie"
    },
    genre: [
        {
            name: "Комедия",
            slug: "comedy"
        }
    ],
    rating: 9,
    name: "Иван Васильевич меняет профессию",
    year: 1973,
    description: "Инженер-изобретатель Тимофеев сконструировал машину времени, которая соединила его квартиру с далеким шестнадцатым веком - точнее, с палатами государя Ивана Грозного. Туда-то и попадают тезка царя пенсионер-общественник Иван Васильевич Бунша и квартирный вор Жорж Милославский.  На их место в двадцатом веке «переселяется» великий государь. Поломка машины приводит ко множеству неожиданных и забавных событий..."
}
```

3. Отзывы о произведении
```commandline
http://localhost/api/v1/titles/3/reviews/?format=json
```

```commandline
{
    count: 2,
    next: null,
    previous: null,
    results: [
        {
            id: 6,
            text: "Сразу скажу, что я не фанат Стивена Кинга и петь ему тут дифирамбы я не буду, поэтому всем его поклонникам я советую дальше не читать. Он написал много бредятины (сам не читал - рассказывали), и снято по этой бредятине тоже не мало ещё большей бредятины (кое что я даже смотрел). Да, попадаются среди всей этой бредятины и шедевры, но это не тот случай.",
            author: "Пётр Петров",
            score: 3,
            pub_date: "2022-03-11T18:38:35.347000Z"
        },
        {
            id: 5,
            text: "Лично мне фильм очень понравился. Данный фильм по настоящему вызвал страх, который можно было ощутить в детстве при просмотре тяжелых фильмов, как “Черный лебедь” от Андрес Хайнца или “Кладбище домашних животных” Стивена Кинга. Более того, действительно было страшно при просмотре этого фильма в кинотеатре. Тогда кинозал с первого по последний рядов были забиты детьми и подростками от тринадцати лет, и они визжали, были взбудоражены от ярких и мрачных кадров на экране, особенно при страшных моментов даже роняли коробки попкорна. Обычно в таких случаях других зрителей раздражает такое поведение, когда дети кричат и хохочут, тем самым портят впечатление от фильма ужасов, однако тут получилось совсем наоборот. Фильм вправду пугает, к тому же он сделан про детей и для детей.",
            author: "Василий Васильев",
            score: 8,
            pub_date: "2022-03-11T18:38:06.321000Z"
        }
    ]
}
```

4. Комментарии к отзыву
```commandline
http://localhost/api/v1/titles/5/reviews/10/comments/?format=json
```

```commandline
{
    count: 1,
    next: null,
    previous: null,
    results: [
        {
            id: 1,
            review: "Фильм хорошо так затронул средний класс, макнув их в их же довольно пустую жизнь потребления. Вот только толкового решения в фильме нет. Сюжет идёт через некие личности в фильме, которые в виде образов конечно же не являются реальными. Реальны актёры, играющие эти образы, реальны идеи деструктивности, реальны авторы этого фильмы и все приложившие руку к производству. Вот только зритель либо видит навязанный культ либо искренне ненавидит этот фильм. Образы может и оказывают влияние на неокрепшую психику, вот только впечатлившийся зритель начинает подражать увиденным образам или же проникаться той же идеей деструктивизма. Больше в фильме нет ничего.",
            author: "Василий Васильев",
            text: "согласен",
            pub_date: "2022-03-11T18:47:26.570000Z"
        }
    ]
}
```